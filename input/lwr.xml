<simulation>
  <control>
    <duration>1200</duration>
    <startmonth>1</startmonth>
    <startyear>2015</startyear>
  </control>

  <archetypes>
    <spec>
      <lib>cycamore</lib>
      <name>Source</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>EnrichmentFacility</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>BatchReactor</name>
    </spec>
    <spec>
      <path>streamblender</path>
      <lib>StreamBlender</lib>
      <name>StreamBlender</name>
    </spec>
    <spec>
      <path>commodconverter</path>
      <lib>CommodConverter</lib>
      <name>CommodConverter</name>
    </spec>
    <spec>
      <path>separationmatrix</path>
      <lib>SeparationMatrix</lib>
      <name>SeparationMatrix</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Sink</name>
    </spec>
  </archetypes>

  <facility>
    <name>Mine</name>
    <lifetime>1200</lifetime>
    <config>
      <Source>
        <out_commod>nat_u</out_commod>
        <recipe_name>nat_u_recipe</recipe_name>
        <capacity>200000</capacity>
      </Source>
    </config>
  </facility>

  <facility>
    <name>Enrichment</name>
    <lifetime>1200</lifetime>
    <config>
      <CommodConverter>
        <in_commod>nat_u</in_commod>
        <in_recipe>nat_u_recipe</in_recipe>
        <out_commod>leu</out_commod>
        <out_recipe>leu_recipe</out_recipe>
        <process_time>0</process_time>
      </CommodConverter>
    </config>
  </facility>

  <facility>
    <name>LWRFuelFab</name>
    <lifetime>1200</lifetime>
    <config>
      <CommodConverter>
        <in_commod>leu</in_commod>
        <in_recipe>leu_recipe</in_recipe>
        <out_commod>fresh_lwr_fuel</out_commod>
        <out_recipe>fresh_lwr_fuel_recipe</out_recipe>
        <process_time>12</process_time>
      </CommodConverter>
    </config>
  </facility>

  <facility>
    <name>SFRFuelFab</name>
    <lifetime>1200</lifetime>
    <config>
      <StreamBlender>
        <in_commods>
          <val>rep_sfr_tru</val>
          <val>rep_lwr_tru</val>
          <val>rep_sfr_u</val>
          <val>dep_u</val>
          <val>nat_u</val>
        </in_commods>
        <out_commod>fresh_sfr_fuel</out_commod>
        <out_recipe>fresh_sfr_fuel_recipe</out_recipe>
        <in_recipes>
          <val>rep_sfr_tru_recipe</val>
          <val>rep_lwr_tru_recipe</val>
          <val>rep_sfr_u_recipe</val>
          <val>dep_u_recipe</val>
          <val>nat_u_recipe</val>
        </in_recipes>
        <isos>
          <val>94240</val>
          <val>94240</val>
          <val>92235</val>
          <val>92235</val>
          <val>92235</val>
          <val>94239</val>
          <val>95241</val>
        </isos>
        <sources>
          <val>rep_sfr_tru</val>
          <val>rep_lwr_tru</val>
          <val>rep_sfr_u</val>
          <val>dep_u</val>
          <val>nat_u</val>
          <val>rep_lwr_tru</val>
          <val>rep_lwr_tru</val>
        </sources>
        <process_time>12</process_time>
        <!-- need commodity production? -->
      </StreamBlender>
    </config>
  </facility>

  <facility>
    <name>LWR</name>
    <lifetime>1200</lifetime>
    <config>
      <BatchReactor>
        <fuel>
         <incommodity>fresh_lwr_fuel</incommodity>
         <inrecipe>fresh_lwr_fuel_recipe</inrecipe>
         <outcommodity>lwr_unf</outcommodity>
         <outrecipe>lwr_unf_recipe</outrecipe>
        </fuel>
        <processtime>12</processtime>
        <nbatches>9</nbatches> <!-- Can only be an integer 4.5*2.0 = 9-->
        <batchsize>9950.0</batchsize> <!-- adjusted per above 19.91/2.0 = 9.95-->
        <nreload>2</nreload> <!-- as per above, 9.0/4.5 = 2 -->
        <commodity_production>
          <commodity>power</commodity>
          <capacity>90</capacity>
          <cost>90</cost>
        </commodity_production>
      </BatchReactor>
    </config>
  </facility>

  <facility>
    <name>SFR</name>
    <lifetime>720</lifetime>
    <config>
      <BatchReactor>
        <fuel>
         <incommodity>fresh_sfr_fuel</incommodity>
         <inrecipe>fresh_sfr_fuel_recipe</inrecipe>
         <outcommodity>sfr_unf</outcommodity>
         <outrecipe>sfr_unf_recipe</outrecipe>
        </fuel>
        <processtime>12</processtime>
        <nbatches>79</nbatches> <!-- Can only be an integer 3.95*20 = 79.0-->
        <batchsize>198.0</batchsize> <!-- as per above, 3.96/20.0 = 0.198 --> 
        <nreload>20</nreload> <!-- as per above, 79.0/3.95=20. -->
        <commodity_production>
          <commodity>power</commodity>
          <capacity>30</capacity>
          <cost>30</cost>
        </commodity_production>
      </BatchReactor>
    </config>
  </facility>

  <facility>
    <name>LWRWetStorage</name>
    <lifetime>1200</lifetime>
    <config>
      <CommodConverter>
        <in_commod>lwr_unf</in_commod>
        <in_recipe>lwr_unf_recipe</in_recipe>
        <out_commod>lwr_unf_cool</out_commod>
        <out_recipe>lwr_unf_recipe</out_recipe>
        <process_time>48</process_time>
        <!-- need commodity production section? -->
      </CommodConverter>
    </config>
  </facility>

  <facility>
    <name>SFRWetStorage</name>
    <lifetime>1200</lifetime>
    <config>
      <CommodConverter>
        <in_commod>sfr_unf</in_commod>
        <in_recipe>sfr_unf_recipe</in_recipe>
        <out_commod>sfr_unf_cool</out_commod>
        <out_recipe>sfr_unf_recipe</out_recipe>
        <process_time>12</process_time>
        <!-- need commodity production section? -->
      </CommodConverter>
    </config>
  </facility>

  <facility>
    <name>LWRSeparations</name> <!-- need enter time 2025 -->
    <lifetime>1200</lifetime>
    <config>
      <SeparationMatrix>
        <in_commod>lwr_unf_cool</in_commod>
        <out_commods>
          <val>rep_lwr_tru</val>
          <val>rep_lwr_u</val>
        </out_commods>
        <elems>
          <val>92</val>
          <val>94</val>
          <val>95</val>
        </elems>
        <effs>
          <val>1</val>
          <val>1</val>
          <val>1</val>
        </effs>
        <streams>
          <val>rep_lwr_u</val>
          <val>rep_lwr_tru</val>
          <val>rep_lwr_tru</val>
        </streams>
        <process_time>0</process_time>
        <capacity>166667</capacity>
        <cost>0</cost>
        <!-- need commodity production section? -->
      </SeparationMatrix>
    </config>
  </facility>

  <facility>
    <name>SFRSeparations</name>
    <lifetime>1200</lifetime>
    <config>
      <SeparationMatrix>
        <in_commod>sfr_unf_cool</in_commod>
        <out_commods>
          <val>rep_sfr_tru</val>
          <val>rep_sfr_u</val>
        </out_commods>
        <elems>
          <val>92</val>
          <val>94</val>
          <val>95</val>
        </elems>
        <effs>
          <val>1</val>
          <val>1</val>
          <val>1</val>
        </effs>
        <streams>
          <val>rep_sfr_u</val>
          <val>rep_sfr_tru</val>
          <val>rep_sfr_tru</val>
        </streams>
        <process_time>0</process_time>
        <!-- need commodity production section? -->
      </SeparationMatrix>
    </config>
  </facility>

  <facility>
    <name>Repository</name>
    <lifetime>1200</lifetime>
    <config>
      <Sink>
        <in_commods>
          <val>waste</val>
        </in_commods>
        <capacity>200000</capacity>
      </Sink>
    </config>
  </facility>

  <region>
    <name>SingleRegion</name>
    <config>
      <GrowthRegion>
        <commodity_name>power</commodity_name>
        <demand_types>
          <val>linear</val>
        </demand_types>
        <demand_params>
          <val>0 90</val> <!-- slope intercept -->
        </demand_params>
        <demand_times>
          <val>1</val>
        </demand_times>
      </GrowthRegion>
    </config>
    <institution>
      <name>SingleInstitution</name>
      <initialfacilitylist>
        <entry>
          <prototype>Mine</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>Enrichment</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>LWRFuelFab</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>SFRFuelFab</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>LWRWetStorage</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>SFRWetStorage</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>LWRSeparations</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>SFRSeparations</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>LWR</prototype>
          <number>100</number>
        </entry>
        <entry>
          <prototype>Repository</prototype>
          <number>1</number>
        </entry>
      </initialfacilitylist>
      <config>
        <MktDrivenInst>
          <target_fac>SFR</target_fac>
          <num_to_build>3</num_to_build>
          <target_commod>fresh_sfr_fuel</target_commod>
          <amt_req>10.0</amt_req>
          <prototypes>
            <val>Mine</val>
            <val>Enrichment</val>
            <val>LWRFuelFab</val>
            <val>SFRFuelFab</val>
            <val>LWR</val>
            <val>SFR</val>
            <val>LWRWetStorage</val>
            <val>SFRWetStorage</val>
            <val>LWRSeparations</val>
            <val>SFRSeparations</val>
            <val>Repository</val>
          </prototypes>
        </MktDrivenInst>
      </config>
    </institution>
  </region>


  <recipe>
    <name>nat_u_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>92235</id>
      <comp>0.711</comp>
    </nuclide>
    <nuclide>
      <id>92238</id>
      <comp>99.289</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>leu_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>92235</id>
      <comp>4.3</comp>
    </nuclide>
    <nuclide>
      <id>92238</id>
      <comp>95.7</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>dep_u_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>92235</id>
      <comp>0.25</comp>
    </nuclide>
    <nuclide>
      <id>92238</id>
      <comp>99.75</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>fresh_lwr_fuel_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>92235</id>
      <comp>4.3</comp>
    </nuclide>
    <nuclide>
      <id>92235</id>
      <comp>95.7</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>fresh_sfr_fuel_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>92235</id>
      <comp>86.13</comp>
    </nuclide>
    <nuclide>
      <id>94239</id>
      <comp>13.87</comp>
    </nuclide>
    <nuclide>
      <id>95241</id>
      <comp>0.48</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>lwr_unf_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>92235</id>
      <comp>93.44</comp>
    </nuclide>
    <nuclide>
      <id>94239</id>
      <comp>1.20</comp>
    </nuclide>
    <nuclide>
      <id>95241</id>
      <comp>0.1</comp>
    </nuclide>
    <nuclide>
      <id>43099</id>
      <comp>5.26</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>sfr_unf_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>92235</id>
      <comp>78.30</comp>
    </nuclide>
    <nuclide>
      <id>94239</id>
      <comp>13.56</comp>
    </nuclide>
    <nuclide>
      <id>95241</id>
      <comp>0.48</comp>
    </nuclide>
    <nuclide>
      <id>43099</id>
      <comp>7.66</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>rep_sfr_tru_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>94239</id>
      <comp>13.56</comp>
    </nuclide>
    <nuclide>
      <id>95241</id>
      <comp>0.48</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>rep_lwr_tru_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>94239</id>
      <comp>1.20</comp>
    </nuclide>
    <nuclide>
      <id>95241</id>
      <comp>0.1</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>rep_sfr_u_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>92235</id>
      <comp>78.30</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>rep_lwr_u_recipe</name>
    <basis>mass</basis>
    <nuclide>
      <id>92235</id>
      <comp>93.44</comp>
    </nuclide>
  </recipe>


</simulation>
